import*as s from"https://cdn.skypack.dev/three@0.129.0/build/three.module.js";import{GLTFLoader as x}from"https://cdn.skypack.dev/three@0.129.0/examples/jsm/loaders/GLTFLoader.js";import{gsap as m}from"https://cdn.skypack.dev/gsap";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();"scrollRestoration"in history&&(history.scrollRestoration="manual");window.scrollTo(0,0);const f=new s.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,0,50);const a=new s.Scene,c=new s.WebGLRenderer({alpha:!0});c.setSize(window.innerWidth,window.innerHeight);c.outputEncoding=s.sRGBEncoding;document.getElementById("container3D").appendChild(c.domElement);const z=new s.AmbientLight(16777215,2);a.add(z);const g=new s.DirectionalLight(16777215,1);g.position.set(500,500,500);a.add(g);const w=new s.DirectionalLight(8900331,.8);w.position.set(-200,300,-200);a.add(w);const y=new s.PointLight(16777215,2,50);y.position.set(0,0,0);a.add(y);let r;const L=new x,p={x:0,y:0,z:0};let u=[{id:"banner",position:{x:p.x,y:p.y,z:p.z},rotation:{x:0,y:1.5,z:0}},{id:"intro",position:{x:5,y:11,z:-5},rotation:{x:0,y:.5,z:0}},{id:"description",position:{x:4,y:-1,z:-5},rotation:{x:0,y:.5,z:0}},{id:"members",position:{x:12,y:1,z:-5},rotation:{x:0,y:.5,z:0}},{id:"contact",position:{x:-25,y:1,z:-10},rotation:{x:0,y:-.5,z:0}}];L.load("/delighted-games/groupedisland.glb",n=>{r=n.scene,r.scale.set(1,1,1),a.add(r);let o=u.find(i=>i.id==="banner");o&&(r.position.set(o.position.x,o.position.y,o.position.z),r.rotation.set(o.rotation.x,o.rotation.y,o.rotation.z)),r.traverse(i=>{i.isMesh&&i.material.map&&(i.material.map.anisotropy=c.capabilities.getMaxAnisotropy(),i.material.map.encoding=s.sRGBEncoding,i.material.needsUpdate=!0)})},n=>{console.log("Island loading progress:",n.loaded/n.total*100+"%")},n=>{console.error("Error loading island model:",n)});function E(){if(!r)return;const n=document.querySelectorAll(".section");let o;n.forEach(t=>{t.getBoundingClientRect().top<=window.innerHeight/3&&(o=t.id)});const i=u.findIndex(t=>t.id===o);if(i<0)return;const{position:d,rotation:e}=u[i];m.to(r.position,{x:d.x,y:d.y,z:d.z,duration:1,ease:"power1.out"}),m.to(r.rotation,{x:e.x,y:e.y,z:e.z,duration:1,ease:"power1.out"})}function h(){requestAnimationFrame(h),c.render(a,f)}h();window.addEventListener("resize",()=>{c.setSize(window.innerWidth,window.innerHeight),f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix()});window.addEventListener("scroll",()=>{E()});
